# Core Concepts
## Analogy
1. Cargo Ships  - Worker Nodes
- hosts applications as containers
2. Control ships - Master Nodes
- managing the whole operation known as control plane components
- etcd is used to store all the data about the cluster
3. Cranes - Scheduler
- decides where to place containers on worker nodes
4. Controller Manager
- handles when nodes are unavailable or gets destroyed etc
5. Kube-apiserver
- exposes API used for management 
- allows different components to talk to each other
6. Container Runtime
- popular is Docker, containerd, CRI-O etc
7. Kubelet - Captain
- runs on each node in the cluster
- listens to the API server for pods to be scheduled on the node
8. Kube-proxy - Crew
- enable communication between services

## ETCD
- distributed key-value store
- listens on port 2379
### ETCD in Kubernetes
- stores all the data about the cluster
- different cluster setup will cause different etcd deployments
    - from scratch
    - kubeadm tool
### From Scratch
- installing etcd and configure in master nodes manually
- advertise client urls to let kubeapi server know where to find etcd
### kubeadm
- kubeadm will install etcd as a pod
- to list all keys in etcd
```bash
kubectl exec etcd-master -n kube-system etcdctl get / --prefix --keys-only
```
### etcd in HA
- multiple master nodes (3 min)
- etcd running in all master nodes

### using etcd
- specify certs, keys, ca, endpoints etc
- default version is v2
- set the version to v3 with `export ETCDCTL_API=3`

## Cluster Architecture
